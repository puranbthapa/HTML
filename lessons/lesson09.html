<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lesson 9: HTML5 Features - HTML Course</title>
    <meta name="description" content="Explore modern HTML5 features, APIs, and advanced elements for creating cutting-edge web applications.">
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üìö</text></svg>">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Fira+Code:wght@400;500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../assets/styles.css">
    <link rel="stylesheet" href="../assets/lesson.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/6.65.7/codemirror.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/6.65.7/codemirror.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/6.65.7/mode/xml/xml.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/6.65.7/mode/css/css.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/6.65.7/mode/htmlmixed/htmlmixed.min.js"></script>
</head>
<body>
    <header class="lesson-header">
        <div class="container">
            <nav class="lesson-nav">
                <a href="../index.html" class="back-link">
                    <span class="back-arrow">‚Üê</span>
                    Back to Course
                </a>
                <div class="lesson-info">
                    <span class="lesson-number">09</span>
                    <h1 class="lesson-title">HTML5 Features</h1>
                </div>
                <div class="lesson-actions">
                    <button class="btn btn-outline btn-sm" onclick="toggleNotes()">üìù Notes</button>
                    <button class="btn btn-primary btn-sm" onclick="markComplete()">‚úì Complete</button>
                </div>
            </nav>
        </div>
    </header>

    <main class="lesson-content">
        <div class="container">
            <div class="lesson-layout">
                <aside class="lesson-sidebar">
                    <div class="sidebar-content">
                        <h3>Contents</h3>
                        <nav class="lesson-toc">
                            <a href="#html5-overview" class="toc-link">HTML5 Overview</a>
                            <a href="#new-elements" class="toc-link">New Elements</a>
                            <a href="#apis" class="toc-link">HTML5 APIs</a>
                            <a href="#storage" class="toc-link">Web Storage</a>
                            <a href="#canvas-svg" class="toc-link">Canvas & SVG</a>
                            <a href="#exercises" class="toc-link">Practice Exercises</a>
                            <a href="#summary" class="toc-link">Summary</a>
                        </nav>
                        
                        <div class="lesson-progress">
                            <h4>Lesson Progress</h4>
                            <div class="progress-bar">
                                <div class="progress-fill" id="lesson-progress"></div>
                            </div>
                            <span class="progress-text" id="progress-text">0% Complete</span>
                        </div>
                        
                        <div class="lesson-navigation">
                            <a href="lesson08.html" class="nav-btn prev-lesson">‚Üê Previous Lesson</a>
                            <a href="lesson10.html" class="nav-btn next-lesson">Next Lesson ‚Üí</a>
                        </div>
                    </div>
                </aside>

                <article class="lesson-main">
                    <section class="lesson-section" id="introduction">
                        <div class="section-header">
                            <h2>Modern HTML5 Features</h2>
                            <span class="section-duration">‚è±Ô∏è 40 minutes</span>
                        </div>
                        
                        <p class="lead">
                            HTML5 revolutionized web development with powerful new features, APIs, and elements. 
                            Discover how to leverage these modern capabilities to create rich, interactive 
                            web applications without relying on external plugins.
                        </p>
                        
                        <div class="learning-objectives">
                            <h3>üéØ Learning Objectives</h3>
                            <ul>
                                <li>Understand HTML5's new capabilities and advantages</li>
                                <li>Use modern HTML5 elements effectively</li>
                                <li>Implement web storage for client-side data</li>
                                <li>Work with HTML5 APIs and JavaScript integration</li>
                                <li>Create graphics with Canvas and SVG</li>
                                <li>Build progressive web applications with HTML5</li>
                            </ul>
                        </div>
                    </section>

                    <section class="lesson-section" id="html5-overview">
                        <h2>HTML5 Revolution</h2>
                        
                        <div class="concept-box">
                            <h3>üí° What's New in HTML5?</h3>
                            <p>
                                HTML5 introduced semantic elements, multimedia support, form enhancements, 
                                drawing capabilities, offline storage, and powerful APIs that enable 
                                desktop-like experiences in web browsers.
                            </p>
                        </div>
                        
                        <h3>Key HTML5 Improvements</h3>
                        <div class="comparison-grid">
                            <div class="comparison-card">
                                <h4>üì± Mobile First</h4>
                                <ul>
                                    <li>Touch-friendly input types</li>
                                    <li>Responsive design support</li>
                                    <li>Offline capabilities</li>
                                    <li>Performance optimizations</li>
                                </ul>
                            </div>
                            
                            <div class="comparison-card">
                                <h4>üéÆ Rich Media</h4>
                                <ul>
                                    <li>Native audio/video support</li>
                                    <li>Canvas for dynamic graphics</li>
                                    <li>SVG integration</li>
                                    <li>WebGL 3D graphics</li>
                                </ul>
                            </div>
                            
                            <div class="comparison-card">
                                <h4>üîß Enhanced Forms</h4>
                                <ul>
                                    <li>New input types (email, date, etc.)</li>
                                    <li>Built-in validation</li>
                                    <li>Placeholder text</li>
                                    <li>Form attributes</li>
                                </ul>
                            </div>
                            
                            <div class="comparison-card">
                                <h4>üåê Web APIs</h4>
                                <ul>
                                    <li>Geolocation services</li>
                                    <li>Local storage</li>
                                    <li>Web workers</li>
                                    <li>WebSocket communication</li>
                                </ul>
                            </div>
                        </div>
                    </section>

                    <section class="lesson-section" id="new-elements">
                        <h2>New HTML5 Elements</h2>
                        
                        <h3>Multimedia Elements</h3>
                        <div class="code-example">
                            <div class="code-header">
                                <span class="code-title">Progress and Meter Elements</span>
                                <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                            </div>
                            <pre><code class="language-html">&lt;!-- Progress indicator --&gt;
&lt;label for="file-progress"&gt;File upload progress:&lt;/label&gt;
&lt;progress id="file-progress" value="32" max="100"&gt;32%&lt;/progress&gt;

&lt;!-- Measurement gauge --&gt;
&lt;label for="disk-usage"&gt;Disk usage:&lt;/label&gt;
&lt;meter id="disk-usage" value="0.6" min="0" max="1"&gt;60%&lt;/meter&gt;

&lt;!-- Battery level example --&gt;
&lt;meter value="75" min="0" max="100" optimum="80" high="60" low="20"&gt;
    75% battery remaining
&lt;/meter&gt;</code></pre>
        </div>
                        
                        <h3>Interactive Elements</h3>
                        <div class="code-example">
                            <div class="code-header">
                                <span class="code-title">Details and Dialog Elements</span>
                                <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                            </div>
                            <pre><code class="language-html">&lt;!-- Collapsible content --&gt;
&lt;details&gt;
    &lt;summary&gt;Click to expand FAQ&lt;/summary&gt;
    &lt;p&gt;This content is hidden by default and shows when clicked.&lt;/p&gt;
    &lt;p&gt;Perfect for FAQs, help sections, and additional details.&lt;/p&gt;
&lt;/details&gt;

&lt;!-- Modal dialog --&gt;
&lt;dialog id="myDialog"&gt;
    &lt;form method="dialog"&gt;
        &lt;h3&gt;Confirm Action&lt;/h3&gt;
        &lt;p&gt;Are you sure you want to proceed?&lt;/p&gt;
        &lt;button value="cancel"&gt;Cancel&lt;/button&gt;
        &lt;button value="confirm"&gt;Confirm&lt;/button&gt;
    &lt;/form&gt;
&lt;/dialog&gt;</code></pre>
        </div>
                        
                        <h3>Time and Data Elements</h3>
                        <div class="code-example">
                            <div class="code-header">
                                <span class="code-title">Time and Data Elements</span>
                                <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                            </div>
                            <pre><code class="language-html">&lt;!-- Time representation --&gt;
&lt;p&gt;The event starts at &lt;time datetime="2024-12-25T09:00"&gt;9:00 AM on Christmas&lt;/time&gt;&lt;/p&gt;
&lt;p&gt;Posted &lt;time datetime="2024-10-14" title="October 14, 2024"&gt;yesterday&lt;/time&gt;&lt;/p&gt;

&lt;!-- Machine-readable data --&gt;
&lt;p&gt;The laptop costs &lt;data value="1299.99"&gt;$1,299.99&lt;/data&gt;&lt;/p&gt;
&lt;p&gt;Product weight: &lt;data value="2.3"&gt;2.3 kg&lt;/data&gt;&lt;/p&gt;</code></pre>
        </div>
                    </section>

                    <section class="lesson-section" id="apis">
                        <h2>HTML5 APIs</h2>
                        
                        <div class="code-playground">
                            <div class="playground-header">
                                <h3>HTML5 API Demonstrations</h3>
                                <div class="playground-tabs">
                                    <button class="tab-btn active" data-tab="html">HTML</button>
                                    <button class="tab-btn" data-tab="preview">Preview</button>
                                </div>
                            </div>
                            
                            <div class="playground-content">
                                <div class="tab-content active" id="html-tab">
                                    <textarea id="html-editor" class="code-editor" title="HTML Editor">&lt;!DOCTYPE html&gt;
&lt;html lang="en"&gt;
&lt;head&gt;
    &lt;meta charset="UTF-8"&gt;
    &lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;
    &lt;title&gt;HTML5 APIs Demo&lt;/title&gt;
    &lt;style&gt;
        body {
            font-family: 'Segoe UI', sans-serif;
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
            background: linear-gradient(135deg, #1e3c72, #2a5298);
            color: white;
            min-height: 100vh;
        }
        
        .demo-section {
            background: rgba(255,255,255,0.1);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 25px;
            margin: 20px 0;
            border: 1px solid rgba(255,255,255,0.2);
        }
        
        h1, h2 {
            text-align: center;
            margin-bottom: 20px;
        }
        
        .api-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        
        .api-card {
            background: rgba(255,255,255,0.15);
            padding: 20px;
            border-radius: 10px;
            border: 1px solid rgba(255,255,255,0.3);
        }
        
        button {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            margin: 5px;
            transition: transform 0.2s;
        }
        
        button:hover {
            transform: translateY(-2px);
        }
        
        button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        input, textarea {
            width: 100%;
            padding: 10px;
            margin: 10px 0;
            border: 1px solid rgba(255,255,255,0.3);
            border-radius: 5px;
            background: rgba(255,255,255,0.1);
            color: white;
            box-sizing: border-box;
        }
        
        input::placeholder, textarea::placeholder {
            color: rgba(255,255,255,0.7);
        }
        
        .status {
            background: rgba(0,255,0,0.2);
            padding: 10px;
            border-radius: 5px;
            margin: 10px 0;
            border-left: 4px solid #00ff00;
        }
        
        .error {
            background: rgba(255,0,0,0.2);
            border-left-color: #ff0000;
        }
        
        canvas {
            border: 2px solid rgba(255,255,255,0.3);
            border-radius: 10px;
            background: rgba(255,255,255,0.1);
            max-width: 100%;
        }
        
        #fileList {
            max-height: 200px;
            overflow-y: auto;
            background: rgba(0,0,0,0.2);
            padding: 10px;
            border-radius: 5px;
            margin-top: 10px;
        }
        
        .file-item {
            padding: 5px 0;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }
        
        progress, meter {
            width: 100%;
            height: 25px;
            margin: 10px 0;
        }
        
        details {
            background: rgba(255,255,255,0.1);
            padding: 15px;
            border-radius: 8px;
            margin: 10px 0;
        }
        
        summary {
            font-weight: bold;
            cursor: pointer;
            padding: 10px;
            background: rgba(255,255,255,0.1);
            border-radius: 5px;
            margin: -15px -15px 15px -15px;
        }
    &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;h1&gt;üöÄ HTML5 APIs Showcase&lt;/h1&gt;
    
    &lt;!-- Geolocation API --&gt;
    &lt;div class="demo-section"&gt;
        &lt;h2&gt;üìç Geolocation API&lt;/h2&gt;
        &lt;div class="api-card"&gt;
            &lt;p&gt;Get your current location using the browser's geolocation service.&lt;/p&gt;
            &lt;button onclick="getLocation()"&gt;Get My Location&lt;/button&gt;
            &lt;div id="locationResult" class="status" style="display:none;"&gt;&lt;/div&gt;
        &lt;/div&gt;
    &lt;/div&gt;
    
    &lt;!-- Web Storage API --&gt;
    &lt;div class="demo-section"&gt;
        &lt;h2&gt;üíæ Web Storage API&lt;/h2&gt;
        &lt;div class="api-grid"&gt;
            &lt;div class="api-card"&gt;
                &lt;h3&gt;Local Storage&lt;/h3&gt;
                &lt;input type="text" id="storageKey" placeholder="Enter key"&gt;
                &lt;input type="text" id="storageValue" placeholder="Enter value"&gt;
                &lt;button onclick="saveToStorage()"&gt;Save Data&lt;/button&gt;
                &lt;button onclick="loadFromStorage()"&gt;Load Data&lt;/button&gt;
                &lt;button onclick="clearStorage()"&gt;Clear All&lt;/button&gt;
                &lt;div id="storageResult"&gt;&lt;/div&gt;
            &lt;/div&gt;
            
            &lt;div class="api-card"&gt;
                &lt;h3&gt;Session Storage&lt;/h3&gt;
                &lt;textarea id="sessionData" placeholder="Enter session data"&gt;&lt;/textarea&gt;
                &lt;button onclick="saveSession()"&gt;Save Session&lt;/button&gt;
                &lt;button onclick="loadSession()"&gt;Load Session&lt;/button&gt;
                &lt;div id="sessionResult"&gt;&lt;/div&gt;
            &lt;/div&gt;
        &lt;/div&gt;
    &lt;/div&gt;
    
    &lt;!-- File API --&gt;
    &lt;div class="demo-section"&gt;
        &lt;h2&gt;üìÅ File API&lt;/h2&gt;
        &lt;div class="api-card"&gt;
            &lt;input type="file" id="fileInput" multiple onchange="handleFiles()"&gt;
            &lt;div id="fileList"&gt;&lt;/div&gt;
            &lt;canvas id="imageCanvas" width="300" height="200" style="display:none;"&gt;&lt;/canvas&gt;
        &lt;/div&gt;
    &lt;/div&gt;
    
    &lt;!-- Canvas API --&gt;
    &lt;div class="demo-section"&gt;
        &lt;h2&gt;üé® Canvas API&lt;/h2&gt;
        &lt;div class="api-card"&gt;
            &lt;canvas id="drawingCanvas" width="400" height="300"&gt;&lt;/canvas&gt;
            &lt;br&gt;
            &lt;button onclick="drawShapes()"&gt;Draw Shapes&lt;/button&gt;
            &lt;button onclick="drawAnimation()"&gt;Start Animation&lt;/button&gt;
            &lt;button onclick="clearCanvas()"&gt;Clear Canvas&lt;/button&gt;
        &lt;/div&gt;
    &lt;/div&gt;
    
    &lt;!-- Notification API --&gt;
    &lt;div class="demo-section"&gt;
        &lt;h2&gt;üîî Notification API&lt;/h2&gt;
        &lt;div class="api-card"&gt;
            &lt;p&gt;Send desktop notifications to users (requires permission).&lt;/p&gt;
            &lt;button onclick="requestNotificationPermission()"&gt;Request Permission&lt;/button&gt;
            &lt;button onclick="showNotification()" id="notifyBtn" disabled&gt;Show Notification&lt;/button&gt;
            &lt;div id="notificationStatus"&gt;&lt;/div&gt;
        &lt;/div&gt;
    &lt;/div&gt;
    
    &lt;!-- HTML5 Form Features --&gt;
    &lt;div class="demo-section"&gt;
        &lt;h2&gt;üìù Enhanced Form Features&lt;/h2&gt;
        &lt;div class="api-grid"&gt;
            &lt;div class="api-card"&gt;
                &lt;h3&gt;Form Validation&lt;/h3&gt;
                &lt;form onsubmit="return handleFormSubmit(event)"&gt;
                    &lt;input type="email" placeholder="Email (required)" required&gt;
                    &lt;input type="url" placeholder="Website URL"&gt;
                    &lt;input type="number" min="1" max="100" placeholder="Age (1-100)"&gt;
                    &lt;input type="date" title="Select date"&gt;
                    &lt;button type="submit"&gt;Validate Form&lt;/button&gt;
                &lt;/form&gt;
            &lt;/div&gt;
            
            &lt;div class="api-card"&gt;
                &lt;h3&gt;Progress &amp; Meter&lt;/h3&gt;
                &lt;label&gt;Upload Progress:&lt;/label&gt;
                &lt;progress id="uploadProgress" value="45" max="100"&gt;45%&lt;/progress&gt;
                
                &lt;label&gt;System Health:&lt;/label&gt;
                &lt;meter value="0.8" min="0" max="1" optimum="0.9" high="0.7" low="0.3"&gt;80%&lt;/meter&gt;
                
                &lt;button onclick="updateProgress()"&gt;Update Progress&lt;/button&gt;
            &lt;/div&gt;
        &lt;/div&gt;
    &lt;/div&gt;
    
    &lt;!-- Interactive Elements --&gt;
    &lt;div class="demo-section"&gt;
        &lt;h2&gt;üîß Interactive Elements&lt;/h2&gt;
        &lt;div class="api-card"&gt;
            &lt;details&gt;
                &lt;summary&gt;üéØ Advanced HTML5 Features&lt;/summary&gt;
                &lt;p&gt;&lt;strong&gt;Web Workers:&lt;/strong&gt; Run JavaScript in background threads&lt;/p&gt;
                &lt;p&gt;&lt;strong&gt;WebSocket:&lt;/strong&gt; Real-time bidirectional communication&lt;/p&gt;
                &lt;p&gt;&lt;strong&gt;Drag and Drop:&lt;/strong&gt; Native drag-and-drop functionality&lt;/p&gt;
                &lt;p&gt;&lt;strong&gt;History API:&lt;/strong&gt; Manipulate browser history&lt;/p&gt;
            &lt;/details&gt;
            
            &lt;details&gt;
                &lt;summary&gt;üåê Browser Compatibility&lt;/summary&gt;
                &lt;p&gt;Most HTML5 features are well-supported in modern browsers:&lt;/p&gt;
                &lt;ul&gt;
                    &lt;li&gt;Chrome 4+ (2010)&lt;/li&gt;
                    &lt;li&gt;Firefox 3.5+ (2009)&lt;/li&gt;
                    &lt;li&gt;Safari 4+ (2009)&lt;/li&gt;
                    &lt;li&gt;Edge 12+ (2015)&lt;/li&gt;
                &lt;/ul&gt;
            &lt;/details&gt;
        &lt;/div&gt;
    &lt;/div&gt;

    &lt;script&gt;
        // Geolocation API
        function getLocation() {
            const resultDiv = document.getElementById('locationResult');
            
            if (navigator.geolocation) {
                resultDiv.style.display = 'block';
                resultDiv.innerHTML = 'üîç Getting location...';
                
                navigator.geolocation.getCurrentPosition(
                    function(position) {
                        const lat = position.coords.latitude;
                        const lng = position.coords.longitude;
                        resultDiv.innerHTML = `üìç Location: ${lat.toFixed(4)}, ${lng.toFixed(4)}&lt;br&gt;
                                             Accuracy: ${position.coords.accuracy} meters`;
                    },
                    function(error) {
                        resultDiv.className = 'status error';
                        resultDiv.innerHTML = `‚ùå Error: ${error.message}`;
                    }
                );
            } else {
                resultDiv.style.display = 'block';
                resultDiv.className = 'status error';
                resultDiv.innerHTML = '‚ùå Geolocation not supported';
            }
        }
        
        // Web Storage API
        function saveToStorage() {
            const key = document.getElementById('storageKey').value;
            const value = document.getElementById('storageValue').value;
            
            if (key && value) {
                localStorage.setItem(key, value);
                document.getElementById('storageResult').innerHTML = `‚úÖ Saved: ${key} = ${value}`;
            }
        }
        
        function loadFromStorage() {
            const key = document.getElementById('storageKey').value;
            if (key) {
                const value = localStorage.getItem(key);
                document.getElementById('storageResult').innerHTML = 
                    value ? `üìñ Loaded: ${key} = ${value}` : `‚ùå Key "${key}" not found`;
            }
        }
        
        function clearStorage() {
            localStorage.clear();
            document.getElementById('storageResult').innerHTML = 'üóëÔ∏è Local storage cleared';
        }
        
        function saveSession() {
            const data = document.getElementById('sessionData').value;
            if (data) {
                sessionStorage.setItem('sessionData', data);
                document.getElementById('sessionResult').innerHTML = '‚úÖ Session data saved';
            }
        }
        
        function loadSession() {
            const data = sessionStorage.getItem('sessionData');
            document.getElementById('sessionResult').innerHTML = 
                data ? `üìñ Session data: ${data}` : '‚ùå No session data found';
        }
        
        // File API
        function handleFiles() {
            const fileInput = document.getElementById('fileInput');
            const fileList = document.getElementById('fileList');
            const canvas = document.getElementById('imageCanvas');
            
            fileList.innerHTML = '';
            
            for (let file of fileInput.files) {
                const div = document.createElement('div');
                div.className = 'file-item';
                div.innerHTML = `üìÑ ${file.name} (${(file.size/1024).toFixed(1)} KB)`;
                fileList.appendChild(div);
                
                // Show image preview for image files
                if (file.type.startsWith('image/')) {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        canvas.style.display = 'block';
                        const ctx = canvas.getContext('2d');
                        const img = new Image();
                        img.onload = function() {
                            ctx.clearRect(0, 0, canvas.width, canvas.height);
                            ctx.drawImage(img, 0, 0, canvas.width, canvas.height);
                        };
                        img.src = e.target.result;
                    };
                    reader.readAsDataURL(file);
                }
            }
        }
        
        // Canvas API
        function drawShapes() {
            const canvas = document.getElementById('drawingCanvas');
            const ctx = canvas.getContext('2d');
            
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // Draw gradient background
            const gradient = ctx.createLinearGradient(0, 0, canvas.width, canvas.height);
            gradient.addColorStop(0, '#667eea');
            gradient.addColorStop(1, '#764ba2');
            ctx.fillStyle = gradient;
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            // Draw shapes
            ctx.fillStyle = '#ff6b6b';
            ctx.fillRect(50, 50, 80, 60);
            
            ctx.fillStyle = '#4ecdc4';
            ctx.beginPath();
            ctx.arc(200, 100, 40, 0, 2 * Math.PI);
            ctx.fill();
            
            ctx.fillStyle = '#45b7d1';
            ctx.beginPath();
            ctx.moveTo(300, 50);
            ctx.lineTo(350, 130);
            ctx.lineTo(250, 130);
            ctx.closePath();
            ctx.fill();
        }
        
        function drawAnimation() {
            const canvas = document.getElementById('drawingCanvas');
            const ctx = canvas.getContext('2d');
            let x = 0;
            
            function animate() {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                
                ctx.fillStyle = `hsl(${x}, 70%, 50%)`;
                ctx.beginPath();
                ctx.arc(x % canvas.width, 150, 20, 0, 2 * Math.PI);
                ctx.fill();
                
                x += 2;
                if (x &lt; canvas.width + 40) {
                    requestAnimationFrame(animate);
                }
            }
            animate();
        }
        
        function clearCanvas() {
            const canvas = document.getElementById('drawingCanvas');
            const ctx = canvas.getContext('2d');
            ctx.clearRect(0, 0, canvas.width, canvas.height);
        }
        
        // Notification API
        function requestNotificationPermission() {
            if ('Notification' in window) {
                Notification.requestPermission().then(function(permission) {
                    const status = document.getElementById('notificationStatus');
                    if (permission === 'granted') {
                        status.innerHTML = '‚úÖ Notification permission granted';
                        document.getElementById('notifyBtn').disabled = false;
                    } else {
                        status.innerHTML = '‚ùå Notification permission denied';
                    }
                });
            }
        }
        
        function showNotification() {
            if (Notification.permission === 'granted') {
                new Notification('HTML5 Demo', {
                    body: 'This is a test notification from your HTML5 app!',
                    icon: 'data:image/svg+xml,&lt;svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"&gt;&lt;text y=".9em" font-size="90"&gt;üîî&lt;/text&gt;&lt;/svg&gt;'
                });
            }
        }
        
        // Form handling
        function handleFormSubmit(event) {
            event.preventDefault();
            alert('Form validation passed! ‚úÖ');
            return false;
        }
        
        // Progress update
        function updateProgress() {
            const progress = document.getElementById('uploadProgress');
            const meter = document.querySelector('meter');
            
            progress.value = Math.random() * 100;
            meter.value = Math.random();
        }
        
        // Initialize on page load
        document.addEventListener('DOMContentLoaded', function() {
            // Check notification support
            if ('Notification' in window) {
                if (Notification.permission === 'granted') {
                    document.getElementById('notifyBtn').disabled = false;
                }
            }
        });
    &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;</textarea>
                                </div>
                                
                                <div class="tab-content" id="preview-tab">
                                    <iframe id="preview-frame" class="preview-frame" title="HTML5 APIs Preview"></iframe>
                                </div>
                            </div>
                            
                            <div class="playground-actions">
                                <button class="btn btn-primary" onclick="updatePreview()">Update Preview</button>
                                <button class="btn btn-outline" onclick="resetCode()">Reset Code</button>
                            </div>
                        </div>
                    </section>

                    <section class="lesson-section" id="storage">
                        <h2>Web Storage</h2>
                        
                        <h3>Local Storage vs Session Storage</h3>
                        <div class="comparison-grid">
                            <div class="comparison-card">
                                <h4>üíæ Local Storage</h4>
                                <ul>
                                    <li>Persists until manually cleared</li>
                                    <li>Shared across browser tabs</li>
                                    <li>Typically 5-10MB limit</li>
                                    <li>Perfect for user preferences</li>
                                </ul>
                            </div>
                            
                            <div class="comparison-card">
                                <h4>üîÑ Session Storage</h4>
                                <ul>
                                    <li>Cleared when tab closes</li>
                                    <li>Isolated per browser tab</li>
                                    <li>Same storage limit as localStorage</li>
                                    <li>Good for temporary data</li>
                                </ul>
                            </div>
                        </div>
                        
                        <div class="code-example">
                            <div class="code-header">
                                <span class="code-title">Web Storage API Usage</span>
                                <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                            </div>
                            <pre><code class="language-html">&lt;script&gt;
// Local Storage
localStorage.setItem('username', 'john_doe');
localStorage.setItem('preferences', JSON.stringify({
    theme: 'dark',
    language: 'en'
}));

// Retrieve data
const username = localStorage.getItem('username');
const prefs = JSON.parse(localStorage.getItem('preferences'));

// Session Storage
sessionStorage.setItem('cart', JSON.stringify([
    { id: 1, name: 'Laptop', price: 999 },
    { id: 2, name: 'Mouse', price: 29 }
]));

// Check if storage is supported
if (typeof(Storage) !== "undefined") {
    // Storage supported
} else {
    // No web storage support
    console.log('Web Storage not supported');
}

// Storage events (listen for changes in other tabs)
window.addEventListener('storage', function(e) {
    console.log('Storage changed:', e.key, e.newValue);
});
&lt;/script&gt;</code></pre>
        </div>
                    </section>

                    <section class="lesson-section" id="canvas-svg">
                        <h2>Graphics: Canvas vs SVG</h2>
                        
                        <h3>Canvas for Raster Graphics</h3>
                        <div class="code-example">
                            <div class="code-header">
                                <span class="code-title">Canvas Drawing</span>
                                <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                            </div>
                            <pre><code class="language-html">&lt;canvas id="myCanvas" width="400" height="300"&gt;&lt;/canvas&gt;

&lt;script&gt;
const canvas = document.getElementById('myCanvas');
const ctx = canvas.getContext('2d');

// Draw rectangle
ctx.fillStyle = '#3498db';
ctx.fillRect(10, 10, 150, 100);

// Draw circle
ctx.beginPath();
ctx.arc(200, 60, 50, 0, 2 * Math.PI);
ctx.fillStyle = '#e74c3c';
ctx.fill();

// Draw text
ctx.fillStyle = '#2c3e50';
ctx.font = '20px Arial';
ctx.fillText('Hello Canvas!', 10, 150);

// Animation loop
function animate() {
    // Clear and redraw
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    // ... drawing code
    requestAnimationFrame(animate);
}
&lt;/script&gt;</code></pre>
        </div>
                        
                        <h3>SVG for Vector Graphics</h3>
                        <div class="code-example">
                            <div class="code-header">
                                <span class="code-title">Inline SVG</span>
                                <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                            </div>
                            <pre><code class="language-html">&lt;svg width="400" height="300" xmlns="http://www.w3.org/2000/svg"&gt;
    &lt;!-- Background --&gt;
    &lt;rect width="100%" height="100%" fill="#ecf0f1"/&gt;
    
    &lt;!-- Gradient definition --&gt;
    &lt;defs&gt;
        &lt;linearGradient id="blueGradient" x1="0%" y1="0%" x2="100%" y2="100%"&gt;
            &lt;stop offset="0%" style="stop-color:#3498db;stop-opacity:1" /&gt;
            &lt;stop offset="100%" style="stop-color:#2980b9;stop-opacity:1" /&gt;
        &lt;/linearGradient&gt;
    &lt;/defs&gt;
    
    &lt;!-- Shapes --&gt;
    &lt;rect x="20" y="20" width="120" height="80" fill="url(#blueGradient)" rx="10"/&gt;
    &lt;circle cx="200" cy="60" r="40" fill="#e74c3c" opacity="0.8"/&gt;
    &lt;polygon points="300,20 350,80 250,80" fill="#f39c12"/&gt;
    
    &lt;!-- Text --&gt;
    &lt;text x="20" y="150" font-family="Arial" font-size="18" fill="#2c3e50"&gt;
        Scalable Vector Graphics
    &lt;/text&gt;
    
    &lt;!-- Animation --&gt;
    &lt;circle cx="50" cy="200" r="10" fill="#27ae60"&gt;
        &lt;animate attributeName="cx" values="50;350;50" dur="3s" repeatCount="indefinite"/&gt;
    &lt;/circle&gt;
&lt;/svg&gt;</code></pre>
        </div>
                        
                        <div class="comparison-grid">
                            <div class="comparison-card">
                                <h4>üñºÔ∏è Canvas (Raster)</h4>
                                <ul>
                                    <li>Pixel-based drawing</li>
                                    <li>Great for complex scenes</li>
                                    <li>Game development</li>
                                    <li>Image manipulation</li>
                                    <li>Better performance for animations</li>
                                </ul>
                            </div>
                            
                            <div class="comparison-card">
                                <h4>üìê SVG (Vector)</h4>
                                <ul>
                                    <li>Scalable without quality loss</li>
                                    <li>CSS and JavaScript controllable</li>
                                    <li>Perfect for icons and logos</li>
                                    <li>Accessible and SEO-friendly</li>
                                    <li>Smaller file sizes for simple graphics</li>
                                </ul>
                            </div>
                        </div>
                    </section>

                    <section class="lesson-section" id="exercises">
                        <h2>Practice Exercises</h2>
                        
                        <div class="exercises-grid">
                            <div class="exercise-card">
                                <h3>Exercise 1: Progressive Web App</h3>
                                <p>Build a simple note-taking app using HTML5 features:</p>
                                <ul>
                                    <li>Local storage for saving notes</li>
                                    <li>Offline functionality</li>
                                    <li>File upload/download capabilities</li>
                                    <li>Responsive design with modern elements</li>
                                </ul>
                                <button class="btn btn-outline" onclick="showExerciseSolution(1)">Show Solution</button>
                            </div>
                            
                            <div class="exercise-card">
                                <h3>Exercise 2: Interactive Dashboard</h3>
                                <p>Create a data visualization dashboard:</p>
                                <ul>
                                    <li>Canvas charts and graphs</li>
                                    <li>Geolocation for weather data</li>
                                    <li>Real-time updates using APIs</li>
                                    <li>Progress indicators and meters</li>
                                </ul>
                                <button class="btn btn-outline" onclick="showExerciseSolution(2)">Show Solution</button>
                            </div>
                        </div>
                    </section>

                    <section class="lesson-section" id="summary">
                        <h2>Lesson Summary</h2>
                        
                        <div class="summary-grid">
                            <div class="summary-card">
                                <h3>üéØ What You Learned</h3>
                                <ul>
                                    <li>HTML5 brings powerful new capabilities to web development</li>
                                    <li>New elements enhance semantics and functionality</li>
                                    <li>APIs enable desktop-like web applications</li>
                                    <li>Storage solutions reduce server dependencies</li>
                                    <li>Graphics capabilities rival native applications</li>
                                </ul>
                            </div>
                            
                            <div class="summary-card">
                                <h3>üõ†Ô∏è Key APIs</h3>
                                <dl>
                                    <dt>Geolocation</dt>
                                    <dd>Access user's geographic location</dd>
                                    
                                    <dt>Web Storage</dt>
                                    <dd>Client-side data persistence</dd>
                                    
                                    <dt>Canvas</dt>
                                    <dd>2D and 3D graphics programming</dd>
                                    
                                    <dt>File API</dt>
                                    <dd>Access and manipulate user files</dd>
                                </dl>
                            </div>
                            
                            <div class="summary-card">
                                <h3>üí° Best Practices</h3>
                                <ul>
                                    <li>Always check for API support before using</li>
                                    <li>Provide fallbacks for older browsers</li>
                                    <li>Use progressive enhancement principles</li>
                                    <li>Optimize storage usage and performance</li>
                                    <li>Follow accessibility guidelines</li>
                                    <li>Consider user privacy and permissions</li>
                                </ul>
                            </div>
                        </div>
                        
                        <div class="lesson-completion">
                            <div class="completion-message">
                                <h3>üéâ HTML5 Innovation Expert!</h3>
                                <p>You've mastered modern HTML5 features and APIs! You can now create rich, interactive web applications that compete with native apps!</p>
                            </div>
                            
                            <div class="completion-actions">
                                <button class="btn btn-primary btn-large" onclick="markLessonComplete()">
                                    ‚úì Mark Lesson Complete
                                </button>
                                <a href="lesson10.html" class="btn btn-outline btn-large">
                                    Next: Advanced Audio & Video ‚Üí
                                </a>
                            </div>
                        </div>
                    </section>
                </article>
            </div>
        </div>
    </main>

    <div id="notes-panel" class="notes-panel">
        <div class="notes-header">
            <h3>üìù My Notes</h3>
            <button class="close-btn" onclick="toggleNotes()">&times;</button>
        </div>
        <div class="notes-content">
            <textarea id="notes-textarea" placeholder="Take notes about HTML5 features and APIs..."></textarea>
        </div>
        <div class="notes-footer">
            <button class="btn btn-sm btn-outline" onclick="clearNotes()">Clear</button>
            <button class="btn btn-sm btn-primary" onclick="saveNotes()">Save</button>
        </div>
    </div>

    <script src="../assets/script.js"></script>
    <script>
        let currentProgress = 0;
        let totalSections = 7;
        
        document.addEventListener('DOMContentLoaded', function() {
            initializeLesson();
            initializeCodeEditor();
            loadNotes();
            trackProgress();
        });
        
        function initializeLesson() {
            const sections = document.querySelectorAll('.lesson-section');
            const tocLinks = document.querySelectorAll('.toc-link');
            
            const observerOptions = {
                root: null,
                rootMargin: '-20% 0px -70% 0px',
                threshold: 0
            };
            
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        const id = entry.target.id;
                        updateActiveTocLink(id);
                    }
                });
            }, observerOptions);
            
            sections.forEach(section => observer.observe(section));
        }
        
        function updateActiveTocLink(activeId) {
            const tocLinks = document.querySelectorAll('.toc-link');
            tocLinks.forEach(link => {
                link.classList.remove('active');
                if (link.getAttribute('href') === `#${activeId}`) {
                    link.classList.add('active');
                }
            });
        }
        
        function initializeCodeEditor() {
            const textarea = document.getElementById('html-editor');
            if (!textarea) return;
            
            const editor = CodeMirror.fromTextArea(textarea, {
                mode: 'htmlmixed',
                theme: 'default',
                lineNumbers: true,
                autoCloseTags: true,
                autoCloseBrackets: true,
                indentUnit: 2,
                tabSize: 2,
                lineWrapping: true
            });
            
            editor.on('change', function() {
                updatePreview();
            });
            
            window.htmlEditor = editor;
            updatePreview();
        }
        
        function updatePreview() {
            if (!window.htmlEditor) return;
            
            const code = window.htmlEditor.getValue();
            const previewFrame = document.getElementById('preview-frame');
            if (!previewFrame) return;
            
            const blob = new Blob([code], { type: 'text/html' });
            const url = URL.createObjectURL(blob);
            previewFrame.src = url;
        }
        
        function resetCode() {
            const defaultCode = document.getElementById('html-editor').defaultValue;
            if (window.htmlEditor) {
                window.htmlEditor.setValue(defaultCode);
                updatePreview();
            }
        }
        
        function trackProgress() {
            const sections = document.querySelectorAll('.lesson-section');
            const progressFill = document.getElementById('lesson-progress');
            const progressText = document.getElementById('progress-text');
            
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        currentProgress++;
                        const percentage = Math.min((currentProgress / totalSections) * 100, 100);
                        progressFill.style.width = percentage + '%';
                        progressText.textContent = Math.round(percentage) + '% Complete';
                    }
                });
            }, { threshold: 0.5 });
            
            sections.forEach(section => observer.observe(section));
        }
        
        function toggleNotes() {
            const panel = document.getElementById('notes-panel');
            panel.classList.toggle('open');
        }
        
        function saveNotes() {
            const notes = document.getElementById('notes-textarea').value;
            localStorage.setItem('lesson9-notes', notes);
            showNotification('Notes saved!');
        }
        
        function loadNotes() {
            const savedNotes = localStorage.getItem('lesson9-notes');
            if (savedNotes) {
                document.getElementById('notes-textarea').value = savedNotes;
            }
        }
        
        function clearNotes() {
            document.getElementById('notes-textarea').value = '';
            localStorage.removeItem('lesson9-notes');
            showNotification('Notes cleared!');
        }
        
        function markComplete() {
            if (window.HTMLCourse) {
                window.HTMLCourse.markLessonComplete(9);
            }
            showNotification('Lesson 9 completed! üéâ');
        }
        
        function showNotification(message) {
            const notification = document.createElement('div');
            notification.className = 'notification';
            notification.textContent = message;
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.remove();
            }, 3000);
        }
        
        function copyCode(button) {
            const codeBlock = button.parentNode.nextElementSibling.querySelector('code');
            const text = codeBlock.textContent;
            
            navigator.clipboard.writeText(text).then(() => {
                button.textContent = 'Copied!';
                setTimeout(() => {
                    button.textContent = 'Copy';
                }, 2000);
            });
        }
        
        function showExerciseSolution(exerciseNumber) {
            alert(`Exercise ${exerciseNumber} solution would be shown here in a complete implementation.`);
        }
        
        document.addEventListener('click', function(e) {
            if (e.target.classList.contains('tab-btn')) {
                const tabId = e.target.getAttribute('data-tab');
                const tabs = e.target.parentNode.querySelectorAll('.tab-btn');
                const contents = e.target.closest('.code-playground').querySelectorAll('.tab-content');
                
                tabs.forEach(tab => tab.classList.remove('active'));
                contents.forEach(content => content.classList.remove('active'));
                
                e.target.classList.add('active');
                document.getElementById(`${tabId}-tab`).classList.add('active');
            }
        });
    </script>
</body>
</html>